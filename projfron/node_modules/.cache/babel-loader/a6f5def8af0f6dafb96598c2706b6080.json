{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jayes\\\\OneDrive\\\\Desktop\\\\vscode\\\\MERN\\\\projfrontend\\\\projfrontend\\\\src\\\\user\\\\Signin.js\";\nimport React, { useState } from \"react\";\nimport Base from \"../core/Base\";\nimport { link, Redirect } from \"react-router-dom\";\nimport { signin, authenticate, isAutheticated } from \"../auth/helper\";\n\nconst Signin = () => {\n  const [values, setvalues] = useState({\n    email: \"\",\n    password: \"\",\n    error: \"\",\n    loading: false,\n    didRedirect: false\n  });\n  const {\n    email,\n    password,\n    error,\n    loading,\n    didRedirect\n  } = values;\n  const {\n    user\n  } = isAutheticated();\n\n  const handleChange = name => event => {\n    setvalues({ ...values,\n      error: false,\n      [name]: event.target.value\n    });\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    setvalues({ ...values,\n      error: false,\n      loading: true\n    });\n    signin({\n      email,\n      password\n    }).then(data => {\n      if (data.error) {\n        setvalues({ ...values,\n          error: data.error,\n          loading: true\n        });\n      } else {\n        authenticate(data, () => {\n          setvalues({ ...values,\n            didRedirect: true\n          });\n        });\n      }\n    }).catch(console.log(\"signin request failed\"));\n  };\n\n  const performredirect = () => {\n    if (didRedirect) {\n      if (user && user.role === 1) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 24\n          }\n        }, \"redirect to admin\");\n      } else {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 24\n          }\n        }, \"redirect to user dashboard\");\n      }\n    }\n\n    if (isAutheticated()) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 20\n        }\n      });\n    }\n  };\n\n  const loadingMessage = () => {\n    return loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }\n    }, \"loading...\"));\n  };\n\n  const errorMessage = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-sm-3 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? \"\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, error)));\n  };\n\n  const signinFrom = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-sm-3 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      action: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      onChange: handleChange(\"email\"),\n      className: \"text-light\",\n      value: email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      onChange: handleChange(\"password\"),\n      className: \"text-light\",\n      value: password,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 29\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: onSubmit,\n      className: \"btn btn-success btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }, \"Submit\"))));\n  };\n\n  return /*#__PURE__*/React.createElement(Base, {\n    title: \"sign In page\",\n    description: \"A page foruser to sign In!\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, loadingMessage(), errorMessage(), signinFrom(), performredirect(), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-white text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, JSON.stringify(values)));\n};\n\nexport default Signin;","map":{"version":3,"sources":["C:/Users/jayes/OneDrive/Desktop/vscode/MERN/projfrontend/projfrontend/src/user/Signin.js"],"names":["React","useState","Base","link","Redirect","signin","authenticate","isAutheticated","Signin","values","setvalues","email","password","error","loading","didRedirect","user","handleChange","name","event","target","value","onSubmit","preventDefault","then","data","catch","console","log","performredirect","role","loadingMessage","errorMessage","display","signinFrom","JSON","stringify"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\"\r\nimport Base from \"../core/Base\"\r\nimport {link, Redirect} from \"react-router-dom\"\r\nimport {signin, authenticate, isAutheticated} from \"../auth/helper\"\r\n\r\nconst Signin = () =>{\r\n\r\n\r\n    const [values, setvalues] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n        error: \"\",\r\n        loading: false,\r\n        didRedirect: false\r\n    });\r\n\r\n    const {email, password, error, loading, didRedirect} = values;\r\n    const {user} = isAutheticated();\r\n\r\n    const handleChange = name => event => {\r\n        setvalues({...values, error: false, [name]: event.target.value})\r\n    };\r\n\r\n    const onSubmit = event => {\r\n        event.preventDefault();\r\n        setvalues({...values, error: false, loading: true})\r\n        signin({email, password})\r\n        .then(data=>{\r\n            if (data.error) {\r\n        setvalues({...values, error: data.error, loading: true})\r\n            } else {\r\n                authenticate(data, () => {\r\n                    setvalues({\r\n                        ...values,\r\n                        didRedirect: true\r\n                    })\r\n                })\r\n            }\r\n        })\r\n        .catch(console.log(\"signin request failed\"))\r\n    }\r\n\r\n    const performredirect = () => {\r\n        if (didRedirect) {\r\n            if (user && user.role === 1) {\r\n                return <p>redirect to admin</p>\r\n            } else {\r\n                return <p>redirect to user dashboard</p>\r\n            }\r\n        }\r\n        if (isAutheticated()) {\r\n            return <Redirect to=\"/\" />\r\n        }\r\n    };\r\n\r\n    const loadingMessage = () => {\r\n        return(\r\n            loading && (\r\n                <div className=\"alert alert-info\">\r\n                    <h2>loading...</h2>\r\n                </div>\r\n            )\r\n        )\r\n        };\r\n    const errorMessage = () => {\r\n        return(\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-sm-3 text-left\">\r\n            <div className=\"alert alert-danger\"\r\n            style={{display: error ? \"\" : \"none\"}}>\r\n                {error}\r\n            </div>\r\n            </div>\r\n            </div>\r\n        )}\r\n\r\n\r\n    const signinFrom = () =>{\r\n        return(\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-sm-3 text-left\">\r\n                    <form action=\"\">\r\n                        <div className=\"form-group\">\r\n                            <label onChange={handleChange(\"email\")} className=\"text-light\" value={email}>\r\n                                Email\r\n                            </label>\r\n                            <input className=\"form-control\" type=\"email\" />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label onChange={handleChange(\"password\")} className=\"text-light\" value={password}>\r\n                                Password\r\n                            </label>\r\n                            <input className=\"form-control\" type=\"password\" />\r\n                        </div>\r\n                        <button onClick={onSubmit} className=\"btn btn-success btn-block\">\r\n                            Submit\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <Base title=\"sign In page\" description=\"A page foruser to sign In!\">    \r\n            {loadingMessage()}\r\n            {errorMessage()}\r\n            {signinFrom()}\r\n            {performredirect()}\r\n            <p className=\"text-white text-center\">{JSON.stringify(values)}</p>\r\n        </Base>\r\n    );\r\n};\r\n\r\nexport default Signin;"]},"metadata":{},"sourceType":"module"}